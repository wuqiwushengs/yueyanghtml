<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä»»åŠ¡åˆ—è¡¨æµ‹è¯•</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { font-family: 'Noto Sans SC', sans-serif; background: #f8fafc; padding: 2rem; }
        .task-card { background: white; padding: 1rem; border-radius: 8px; margin-bottom: 1rem; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    </style>
</head>
<body>
    <h1 class="text-2xl font-bold mb-4">ä»»åŠ¡åˆ—è¡¨æµ‹è¯•</h1>
    <div id="taskList" class="space-y-4">
        <!-- åŠ¨æ€ç”Ÿæˆä»»åŠ¡åˆ—è¡¨ -->
    </div>

    <script>
        // ç®€åŒ–çš„ä»»åŠ¡æ•°æ®
        const tasks = [
            {
                id: 1,
                title: 'é¢ˆéƒ¨æ‹‰ä¼¸è¿åŠ¨',
                category: 'commute',
                duration: 3,
                description: 'è½»è½»è½¬åŠ¨é¢ˆéƒ¨ï¼Œåšå‰åå·¦å³çš„æ‹‰ä¼¸è¿åŠ¨ï¼Œç¼“è§£ä¹…åç–²åŠ³',
                steps: ['åç›´èº«ä½“ï¼Œæ”¾æ¾è‚©è†€', 'ç¼“æ…¢å‘å·¦è½¬åŠ¨å¤´éƒ¨ï¼Œä¿æŒ5ç§’', 'ç¼“æ…¢å‘å³è½¬åŠ¨å¤´éƒ¨ï¼Œä¿æŒ5ç§’', 'å‘å‰ä½å¤´ï¼Œä¿æŒ5ç§’', 'å‘åä»°å¤´ï¼Œä¿æŒ5ç§’']
            },
            {
                id: 2,
                title: 'çœ¼éƒ¨æ”¾æ¾ç»ƒä¹ ',
                category: 'commute',
                duration: 2,
                description: 'è¿œçœºçª—å¤–ï¼Œæ”¾æ¾çœ¼éƒ¨è‚Œè‚‰ï¼Œç¼“è§£çœ¼éƒ¨ç–²åŠ³',
                steps: ['é—­ä¸Šçœ¼ç›ï¼Œä¼‘æ¯30ç§’', 'è¿œçœºçª—å¤–ç»¿è‰²æ¤ç‰©30ç§’', 'é¡ºæ—¶é’ˆè½¬åŠ¨çœ¼çƒ5æ¬¡', 'é€†æ—¶é’ˆè½¬åŠ¨çœ¼çƒ5æ¬¡', 'è½»è½»æŒ‰æ‘©çœ¼å‘¨ç©´ä½']
            },
            {
                id: 3,
                title: 'æ·±å‘¼å¸è°ƒèŠ‚',
                category: 'commute',
                duration: 5,
                description: '4-7-8å‘¼å¸æ³•ï¼Œæœ‰æ•ˆç¼“è§£å‹åŠ›å’Œç„¦è™‘',
                steps: ['åç›´èº«ä½“ï¼Œæ”¾æ¾è‚©è†€', 'ç”¨é¼»å­å¸æ°”4ç§’', 'å±ä½å‘¼å¸7ç§’', 'ç”¨å˜´å‘¼æ°”8ç§’', 'é‡å¤ä»¥ä¸Šæ­¥éª¤3-4æ¬¡']
            }
        ];

        // ç®€åŒ–çš„appData
        window.appData = {
            tasks: {
                completed: [],
                todayCount: 0,
                streak: 0
            },
            stats: {
                totalTasks: 0,
                totalMoodRecords: 0,
                bestStreak: 0
            }
        };

        // è·å–åˆ†ç±»åç§°
        function getCategoryName(category) {
            const names = {
                'commute': 'é€šå‹¤',
                'work': 'å·¥ä½œ',
                'sleep': 'ç¡å‰'
            };
            return names[category] || 'å…¶ä»–';
        }

        // æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨
        function renderTasks(filter = 'all') {
            console.log('æ¸²æŸ“ä»»åŠ¡åˆ—è¡¨ï¼Œç­›é€‰æ¡ä»¶:', filter);
            const taskListElement = document.getElementById('taskList');
            if (!taskListElement) {
                console.error('æœªæ‰¾åˆ°taskListå…ƒç´ ');
                return;
            }
            console.log('æ‰¾åˆ°taskListå…ƒç´ :', taskListElement);

            taskListElement.innerHTML = '';
            
            const filteredTasks = tasks.filter(task => {
                if (filter === 'all') return true;
                if (filter === 'completed') {
                    return window.appData.tasks.completed.some(completedTask => completedTask.id === task.id);
                }
                return task.category === filter;
            });
            console.log('ç­›é€‰åçš„ä»»åŠ¡:', filteredTasks);

            filteredTasks.forEach(task => {
                const isCompleted = window.appData.tasks.completed.some(completedTask => completedTask.id === task.id);
                const taskElement = document.createElement('div');
                taskElement.className = `task-card ${isCompleted ? 'completed' : ''}`;
                taskElement.innerHTML = `
                    <div class="flex items-center justify-between">
                        <div class="flex-1">
                            <div class="flex items-center mb-2">
                                <h3 class="text-lg font-semibold text-gray-900 mr-3">${task.title}</h3>
                                <span class="text-xs px-2 py-1 bg-green-100 text-green-700 rounded-full">
                                    ${getCategoryName(task.category)}
                                </span>
                            </div>
                            <p class="text-gray-600 text-sm mb-2">${task.description}</p>
                            <div class="flex items-center space-x-4 text-xs text-gray-500">
                                <span>â±ï¸ ${task.duration}åˆ†é’Ÿ</span>
                                <span>ğŸ“‹ ${task.steps.length}ä¸ªæ­¥éª¤</span>
                                ${isCompleted ? '<span class="text-green-600">âœ… å·²å®Œæˆ</span>' : ''}
                            </div>
                        </div>
                    </div>
                `;
                taskListElement.appendChild(taskElement);
                console.log('å·²æ·»åŠ ä»»åŠ¡å¡ç‰‡:', task.title);
            });

            console.log('ä»»åŠ¡å¡ç‰‡å·²æ·»åŠ åˆ°é¡µé¢');
        }

        // åˆå§‹åŒ–é¡µé¢
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMå·²åŠ è½½');
            console.log('appData:', window.appData);
            console.log('ä»»åŠ¡æ•°æ®:', tasks);
            renderTasks();
        });
    </script>
</body>
</html>